



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Ubiquiti UNMS, UNIFI,Networks how to, guides, examples, and simple usage">
      
      
        <link rel="canonical" href="https://3os.org/moreCategories/ubiquiti/">
      
      
        <meta name="author" content="Stas Kosatuhin">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-\.]+">
      
      <link rel="shortcut icon" href="/assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Ubiquiti Networks</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto :300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto ","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-122318911-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ubiquiti_networks_-_edgerouter_unifi_unms" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://3os.org/" title="3os.org" class="md-header-nav__button md-logo">
          
            <i class="md-icon">donut_small</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              3os.org
            </span>
            <span class="md-header-nav__topic">
              
                Ubiquiti Networks
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/fire1ce/3os.org/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    fire1ce/3os.org
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../guides/BetterTerminal/" class="md-tabs__link">
          Guides
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../linux/general/general/" class="md-tabs__link">
          Linux
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../macOS/general/" class="md-tabs__link">
          macOS
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../raspberryPi/piGeneral/" class="md-tabs__link">
          Raspberry Pi
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../development/git/" class="md-tabs__link">
          Development
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../windows/windowsGeneral/" class="md-tabs__link">
          Windows
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../penTesting/general/" class="md-tabs__link">
          Penetration-Testing
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../generalLinks/" class="md-tabs__link md-tabs__link--active">
          More...
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../markdownCheatSheet/welcome/" class="md-tabs__link">
          Markdown CheatSheet
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://3os.org/" title="3os.org" class="md-nav__button md-logo">
      
        <i class="md-icon">donut_small</i>
      
    </a>
    3os.org
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/fire1ce/3os.org/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    fire1ce/3os.org
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CHANGELOG/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../donation/" title="Donate" class="md-nav__link">
      Donate
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/BetterTerminal/" title="Better Terminal Experience" class="md-nav__link">
      Better Terminal Experience
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPi/TOR-Pi/" title="Raspberry Pi 3 Tor Access Point" class="md-nav__link">
      Raspberry Pi 3 Tor Access Point
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/general/general/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/SSH_Service_Security/" title="SSH Service Security" class="md-nav__link">
      SSH Service Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/centos7/" title="Centos 7" class="md-nav__link">
      Centos 7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/general/files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/general/memorySwap/" title="Memory & Swap" class="md-nav__link">
      Memory & Swap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/lvm/" title="Linux LVM Partitions" class="md-nav__link">
      Linux LVM Partitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-8" type="checkbox" id="nav-5-8">
    
    <label class="md-nav__link" for="nav-5-8">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-8">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/linuxGuides/ResizeRootPartitionWithoutReboot/" title="Resize Root PartitionWithout Reboot" class="md-nav__link">
      Resize Root PartitionWithout Reboot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/linuxGuides/zshOnSteroids/" title="Installing Oh My zsh" class="md-nav__link">
      Installing Oh My zsh
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-9" type="checkbox" id="nav-5-9">
    
    <label class="md-nav__link" for="nav-5-9">
      Linux Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-9">
        Linux Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/cpanel/" title="cPanel & WHM" class="md-nav__link">
      cPanel & WHM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/csf/" title="CSF Firewall" class="md-nav__link">
      CSF Firewall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/nginx/" title="Nginx" class="md-nav__link">
      Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/apache/" title="Apache" class="md-nav__link">
      Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/sophos/" title="Sophos Firewall" class="md-nav__link">
      Sophos Firewall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/wordpress/" title="Wordpress" class="md-nav__link">
      Wordpress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/esxi/" title="Esxi" class="md-nav__link">
      Esxi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/services/plesk/" title="Plesk" class="md-nav__link">
      Plesk
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      macOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        macOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../macOS/general/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macOS/ui/" title="UI Tweaks" class="md-nav__link">
      UI Tweaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macOS/system/" title="System Tweaks" class="md-nav__link">
      System Tweaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macOS/applications/" title="Applications Tweaks" class="md-nav__link">
      Applications Tweaks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Raspberry Pi
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Raspberry Pi
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPi/piGeneral/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPi/TOR-Pi/" title="Raspberry Pi 3 Tor Access Point" class="md-nav__link">
      Raspberry Pi 3 Tor Access Point
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPi/MagicMirror/" title="Raspberry Pi Magic Mirror" class="md-nav__link">
      Raspberry Pi Magic Mirror
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/git/" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/docker/dockerGeneral/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/docker/dockerContainers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/ruby/" title="Ruby" class="md-nav__link">
      Ruby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/npm/" title="npm" class="md-nav__link">
      npm
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Windows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Windows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../windows/windowsGeneral/" title="Windows General" class="md-nav__link">
      Windows General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../windows/windowsGuides/" title="Windows Guides and How-To" class="md-nav__link">
      Windows Guides and How-To
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Penetration-Testing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Penetration-Testing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../penTesting/general/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../penTesting/iddGenerator/" title="IDD Generator & Validator" class="md-nav__link">
      IDD Generator & Validator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../penTesting/clickJacking/" title="Click-Jacking Test" class="md-nav__link">
      Click-Jacking Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../penTesting/androidPT/" title="Android Penetration Testing" class="md-nav__link">
      Android Penetration Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../penTesting/kaliLinux/" title="Kali Linux Modifications" class="md-nav__link">
      Kali Linux Modifications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      More...
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        More...
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../generalLinks/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-2" type="checkbox" id="nav-11-2">
    
    <label class="md-nav__link" for="nav-11-2">
      Browsers Extensions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-2">
        Browsers Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../browsers/chromeExtensions/" title="Chrome" class="md-nav__link">
      Chrome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browsers/firefoxExtentions/" title="Firefox" class="md-nav__link">
      Firefox
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../synology/" title="Synology DSM" class="md-nav__link">
      Synology DSM
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Ubiquiti Networks EdgeRouter & Unifi
      </label>
    
    <a href="./" title="Ubiquiti Networks EdgeRouter & Unifi" class="md-nav__link md-nav__link--active">
      Ubiquiti Networks EdgeRouter & Unifi
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edgerouter_-_ssh_via_rsa_keys" class="md-nav__link">
    EdgeRouter - SSH via RSA keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardening_edgerouter" class="md-nav__link">
    Hardening EdgeRouter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware_offloading" class="md-nav__link">
    Hardware Offloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_-_custom_dynamic_dns_ddns_with_cloudflare" class="md-nav__link">
    EdgeRouter - Custom Dynamic DNS (DDNS) with CloudFlare
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test_the_dynamic_dns_status" class="md-nav__link">
    Test the Dynamic DNS Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guest_wifi_with_ubiquiti_edgerouter_and_unifi_access_points" class="md-nav__link">
    Guest Wifi With Ubiquiti EdgeRouter and Unifi Access Points
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edgerouter_configuration" class="md-nav__link">
    EdgeRouter Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unifi_configuration" class="md-nav__link">
    Unifi Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_openvpn_configuration_443tcp" class="md-nav__link">
    EdgeRouter OpenVPN Configuration 443/TCP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exmaple_for_clinetopvn_config" class="md-nav__link">
    Exmaple for clinet.opvn Config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_free_up_space_by_cleaning_old_firmware" class="md-nav__link">
    EdgeRouter Free Up space by Cleaning Old Firmware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#speedtest_cli_on_edge_router" class="md-nav__link">
    SpeedTest Cli on Edge Router
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable_netflow_on_edgerouter_to_unms" class="md-nav__link">
    Enable NetFlow on EdgeRouter to UNMS
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/" title="Android" class="md-nav__link">
      Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wifiQrGenerator/" title="WiFi QR Generator" class="md-nav__link">
      WiFi QR Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../homebridge/" title="Homebridge" class="md-nav__link">
      Homebridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gmailMarkAsRead/" title="Gmail Mark As Read Script" class="md-nav__link">
      Gmail Mark As Read Script
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Markdown CheatSheet
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Markdown CheatSheet
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/welcome/" title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/headings/" title="Headings" class="md-nav__link">
      Headings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/emphasis/" title="Emphasis" class="md-nav__link">
      Emphasis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/lineBreaks/" title="Line Breaks" class="md-nav__link">
      Line Breaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/lists/" title="Lists" class="md-nav__link">
      Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/tables/" title="Tables" class="md-nav__link">
      Tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/links/" title="Links" class="md-nav__link">
      Links
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/images/" title="Images" class="md-nav__link">
      Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/admonition/" title="Admonition" class="md-nav__link">
      Admonition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/blockQuotes/" title="Block Quotes" class="md-nav__link">
      Block Quotes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/emoji/" title="Emojis List" class="md-nav__link">
      Emojis List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-12" type="checkbox" id="nav-12-12">
    
    <label class="md-nav__link" for="nav-12-12">
      Embed External Sources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-12">
        Embed External Sources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/embedGists/" title="Gists" class="md-nav__link">
      Gists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/embedYouTubeVideos/" title="YouTube Videos" class="md-nav__link">
      YouTube Videos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/embedLucidChart/" title="Lucid Chart" class="md-nav__link">
      Lucid Chart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/template/" title="Simple Template" class="md-nav__link">
      Simple Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-14" type="checkbox" id="nav-12-14">
    
    <label class="md-nav__link" for="nav-12-14">
      Extra
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-14">
        Extra
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../markdownCheatSheet/metaData/" title="Metadata Per Page" class="md-nav__link">
      Metadata Per Page
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edgerouter_-_ssh_via_rsa_keys" class="md-nav__link">
    EdgeRouter - SSH via RSA keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardening_edgerouter" class="md-nav__link">
    Hardening EdgeRouter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware_offloading" class="md-nav__link">
    Hardware Offloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_-_custom_dynamic_dns_ddns_with_cloudflare" class="md-nav__link">
    EdgeRouter - Custom Dynamic DNS (DDNS) with CloudFlare
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test_the_dynamic_dns_status" class="md-nav__link">
    Test the Dynamic DNS Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guest_wifi_with_ubiquiti_edgerouter_and_unifi_access_points" class="md-nav__link">
    Guest Wifi With Ubiquiti EdgeRouter and Unifi Access Points
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edgerouter_configuration" class="md-nav__link">
    EdgeRouter Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unifi_configuration" class="md-nav__link">
    Unifi Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_openvpn_configuration_443tcp" class="md-nav__link">
    EdgeRouter OpenVPN Configuration 443/TCP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exmaple_for_clinetopvn_config" class="md-nav__link">
    Exmaple for clinet.opvn Config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edgerouter_free_up_space_by_cleaning_old_firmware" class="md-nav__link">
    EdgeRouter Free Up space by Cleaning Old Firmware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#speedtest_cli_on_edge_router" class="md-nav__link">
    SpeedTest Cli on Edge Router
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable_netflow_on_edgerouter_to_unms" class="md-nav__link">
    Enable NetFlow on EdgeRouter to UNMS
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/fire1ce/3os.org/edit/master/src/moreCategories/ubiquiti.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="ubiquiti_networks_-_edgerouter_unifi_unms">Ubiquiti Networks - EdgeRouter, Unifi, UNMS<a class="headerlink" href="#ubiquiti_networks_-_edgerouter_unifi_unms" title="Permanent link">&para;</a></h1>
<h2 id="edgerouter_-_ssh_via_rsa_keys">EdgeRouter - SSH via RSA keys<a class="headerlink" href="#edgerouter_-_ssh_via_rsa_keys" title="Permanent link">&para;</a></h2>
<p>SSH to the Edge Router:
Copy the public key to /tmp folder</p>
<p>Run:</p>
<div class="codehilite"><pre><span></span>configure
loadkey <span class="o">[</span>your user<span class="o">]</span> /tmp/id_rsa.pub
</pre></div>

<p>Check that the keys are working by opening new session</p>
<p>Disable Password Authentication</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> service ssh disable-password-authentication
commit <span class="p">;</span> save
</pre></div>

<p>Done.</p>
<p>Enable Password Authentication if needed.</p>
<div class="codehilite"><pre><span></span>delete service ssh disable-password-authentication
</pre></div>

<h2 id="hardening_edgerouter">Hardening EdgeRouter<a class="headerlink" href="#hardening_edgerouter" title="Permanent link">&para;</a></h2>
<p>This will change the GUI to port 8443, disable old cyphers, Only will listen on internal Network.
assuming your EdgeRouter IP is 192.168.1.1, if not change it accordingly.</p>
<p>SSH to the Edge Router</p>
<div class="codehilite"><pre><span></span>configure
<span class="nb">set</span> service gui listen-address <span class="m">192</span>.168.1.1
<span class="nb">set</span> service gui https-port <span class="m">8443</span>
<span class="nb">set</span> service gui older-ciphers disable
<span class="nb">set</span> service ssh listen-address <span class="m">192</span>.168.1.1
<span class="nb">set</span> service ssh protocol-version v2
<span class="nb">set</span> service ubnt-discover disable
<span class="nb">set</span> firewall all-ping disable
commit <span class="p">;</span> save
</pre></div>

<h2 id="hardware_offloading">Hardware Offloading<a class="headerlink" href="#hardware_offloading" title="Permanent link">&para;</a></h2>
<p>For <strong>Devices: ER-X / ER-X-SFP / EP-R6</strong>
Enable <em>hwnat</em> and <em>ipsec</em> offloading.</p>
<div class="codehilite"><pre><span></span>configure

<span class="nb">set</span> system offload hwnat <span class="nb">enable</span>
<span class="nb">set</span> system offload ipsec <span class="nb">enable</span>

commit <span class="p">;</span> save
</pre></div>

<p>Disable <em>hwnat</em> and <em>ipsec</em> offloading.</p>
<div class="codehilite"><pre><span></span>configure

<span class="nb">set</span> system offload hwnat disable
<span class="nb">set</span> system offload ipsec disable

commit <span class="p">;</span> save
</pre></div>

<p>For <strong>Devices: ER-4 / ER-6P / ERLite-3 / ERPoE-5 / ER-8 / ERPro-8 / EP-R8 / ER-8-XG</strong>
Enable IPv4/IPv6 and ipsec offloading.</p>
<div class="codehilite"><pre><span></span>configure

<span class="nb">set</span> system offload ipv4 forwarding <span class="nb">enable</span>
<span class="nb">set</span> system offload ipv4 gre <span class="nb">enable</span>
<span class="nb">set</span> system offload ipv4 pppoe <span class="nb">enable</span>
<span class="nb">set</span> system offload ipv4 vlan <span class="nb">enable</span>

<span class="nb">set</span> system offload ipv6 forwarding <span class="nb">enable</span>
<span class="nb">set</span> system offload ipv6 pppoe <span class="nb">enable</span>
<span class="nb">set</span> system offload ipv6 vlan <span class="nb">enable</span>

<span class="nb">set</span> system offload ipsec <span class="nb">enable</span>

commit <span class="p">;</span> save
</pre></div>

<p>Disable IPv4/IPv6 and ipsec offloading.</p>
<div class="codehilite"><pre><span></span>configure

<span class="nb">set</span> system offload ipv4 forwarding disable
<span class="nb">set</span> system offload ipv4 gre disable
<span class="nb">set</span> system offload ipv4 pppoe disable
<span class="nb">set</span> system offload ipv4 vlan disable

<span class="nb">set</span> system offload ipv6 forwarding disable
<span class="nb">set</span> system offload ipv6 pppoe disable
<span class="nb">set</span> system offload ipv6 vlan disable

<span class="nb">set</span> system offload ipsec disable

commit <span class="p">;</span> save
</pre></div>

<h2 id="edgerouter_-_custom_dynamic_dns_ddns_with_cloudflare">EdgeRouter - Custom Dynamic DNS (DDNS) with CloudFlare<a class="headerlink" href="#edgerouter_-_custom_dynamic_dns_ddns_with_cloudflare" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>subdomain.domain.com</strong>: Dedicated subdomain for the DDNS</li>
<li><strong>zone=domain.com</strong>: Main Domain</li>
<li><em>user@domain.com</em>: CloudFlare Email</li>
<li><em>CloudFlare API</em> Key: API key generated by Cloudflare.</li>
</ul>
<div class="codehilite"><pre><span></span>configure
<span class="nb">set</span> service dns dynamic interface eth0 service custom-cloudflare host-name &lt;subdomain.domain.com&gt;
<span class="nb">set</span> service dns dynamic interface eth0 service custom-cloudflare login &lt;user@domain.com&gt;
<span class="nb">set</span> service dns dynamic interface eth0 service custom-cloudflare password &lt;CloudFlare API Key&gt;
<span class="nb">set</span> service dns dynamic interface eth0 service custom-cloudflare protocol cloudflare
<span class="nb">set</span> service dns dynamic interface eth0 service custom-cloudflare options <span class="nv">zone</span><span class="o">=</span>domain.com
commit <span class="p">;</span> save
</pre></div>

<h3 id="test_the_dynamic_dns_status">Test the Dynamic DNS Status<a class="headerlink" href="#test_the_dynamic_dns_status" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>show dns dynamic status
</pre></div>

<p>Output should be:</p>
<blockquote>
<p>interface    : eth0
ip address   : <PublicIP>
host-name    : <domain>
last update  : Thu Mar 30 13:29:42 2018
update-status: good</p>
</blockquote>
<h2 id="guest_wifi_with_ubiquiti_edgerouter_and_unifi_access_points">Guest Wifi With Ubiquiti EdgeRouter and Unifi Access Points<a class="headerlink" href="#guest_wifi_with_ubiquiti_edgerouter_and_unifi_access_points" title="Permanent link">&para;</a></h2>
<h3 id="edgerouter_configuration">EdgeRouter Configuration<a class="headerlink" href="#edgerouter_configuration" title="Permanent link">&para;</a></h3>
<p>From the Dashboard, click Add Interface and select VLAN.</p>
<p><img alt="Interface" src="/assets/images/ubiquiti/guestWifi/01.Interface.png" /></p>
<p>Set up the VLAN ID as You like for this example will use id <strong>1003</strong> and attach it to the physical interface of your LAN. Give it an IP address in the range of a private IP block, but make sure you end it in a /24 to specify the proper subnet (I originally did /32 as I though it was supposed to be the exact IP address).</p>
<p><img alt="vlan" src="/assets/images/ubiquiti/guestWifi/02.vlan.png" /></p>
<p>Click on the Services tab. Click Add DHCP Server. Set it up similar to the image below.</p>
<p><img alt="DHCP" src="/assets/images/ubiquiti/guestWifi/03.DHCP.png" /></p>
<p>Click on the DNS tab under services. Click Add Listen interface and select the VLAN interface. Make sure you hit save.</p>
<p><img alt="dns" src="/assets/images/ubiquiti/guestWifi/04.dns.png" /></p>
<p>At this point, you should be able to connect to your Guest Network and connect to the Internet. However, you’ll be able to access the EdgeRouter as well as other devices on your LAN. Next thing you have to do is secure the VLAN.</p>
<p>Click on Firewall/NAT and then click on Add Ruleset. This is for packets coming into the router destined for somewhere else (not the router). Set up the default policy for Accept. Click Save.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/05.firewall01.png" /></p>
<p>From the Actions menu next to the Ruleset, click Interfaces.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/06.firewall02.png" /></p>
<p>Select your VLAN interface and the in direction.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/07.firewall03.png" /></p>
<p>Click Rules and then Add New Rule. Click on Basic and name it LAN. Select Drop as the Action.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/08.firewall04.png" /></p>
<p>Click Destination and enter 10.0.1.0/24 or whatever your LAN IP range is. Then click Save. This will drop all packets from the VLAN destined for your LAN. Save.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/09.firewall05.png" /></p>
<p>Repeat 1 and 2 above (name it GUEST_LOCAL). From the Interface, select the VLAN interface and the local direction. However, set up the default policy as Drop.</p>
<p>Add a new rule. Set it to Accept on UDP port 53.</p>
<p><img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/10.firewall06.png" />
<img alt="firewall rules" src="/assets/images/ubiquiti/guestWifi/11.firewall07.png" /></p>
<p>Save.
Let's continue to set up the Uifi AP</p>
<h3 id="unifi_configuration">Unifi Configuration<a class="headerlink" href="#unifi_configuration" title="Permanent link">&para;</a></h3>
<p>If you want to limit your Guest Users Bandwidth, head over to User Groups and create a new user group called Guest.
Enter bandwidth limits that are appropriate for your Internet Speed. I used 6000 down and 2500 up.</p>
<p><img alt="Unifi_limit" src="/assets/images/ubiquiti/guestWifi/12.Unifi_limit.png" /></p>
<p>Now go to the Wireless Networks section and create a new network called “Guest” or whatever you want to call it.</p>
<p>Make sure it is enabled, give it WiFi security key, check the “Guest Policy” option, enter the VLAN <strong>Id you used previously</strong> and choose the Guest User Group. Save!</p>
<p><img alt="Unifi_SSDID" src="/assets/images/ubiquiti/guestWifi/13.Unifi_SSDID.png" /></p>
<p>Done. Test Your New Guest Wifi by connecting to the Guest Wifi and browse to a website.</p>
<h2 id="edgerouter_openvpn_configuration_443tcp">EdgeRouter OpenVPN Configuration 443/TCP<a class="headerlink" href="#edgerouter_openvpn_configuration_443tcp" title="Permanent link">&para;</a></h2>
<p>This Guide is based on <a href="https://help.ubnt.com/hc/en-us/articles/115015971688-EdgeRouter-OpenVPN-Server">Original guide form ubnt support</a> with modifications to the VPN port and protocol</p>
<p>For the purpose of this article, it is assumed that the routing and interface configurations are already in place and that reachability has been tested.</p>
<p>ssh to the EdgeRouter</p>
<p>Make sure that the date/time is set correctly on the EdgeRouter.</p>
<div class="codehilite"><pre><span></span>show date
Thu Dec <span class="m">28</span> <span class="m">14</span>:35:42 UTC <span class="m">2017</span>
</pre></div>

<p>Log in as the root user.</p>
<div class="codehilite"><pre><span></span>sudo su
</pre></div>

<p>Generate a Diffie-Hellman (DH) key file and place it in the /config/auth directory. This Will take some time...</p>
<div class="codehilite"><pre><span></span>openssl dhparam -out /config/auth/dh.pem -2 <span class="m">2048</span>
</pre></div>

<p>Change the current directory.</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> /usr/lib/ssl/misc
</pre></div>

<p>Generate a root certificate (replace <secret> with your desired passphrase).</p>
<div class="codehilite"><pre><span></span>./CA.sh -newca
</pre></div>

<p>exmaple:</p>
<p>PEM Passphrase: <secret>
Country Name: <code>US</code>
State Or Province Name: <code>New York</code>
Locality Name: <code>New York</code>
Organization Name: <code>Ubiquiti</code>
Organizational Unit Name: <code>Support</code>
Common Name: <code>root</code>
Email Address: <code>support@ubnt.com</code></p>
<p><strong><code>NOTE: The Common Name needs to be unique for all certificates.</code></strong></p>
<p>Copy the newly created certificate + key to the /config/auth directory.</p>
<div class="codehilite"><pre><span></span>cp demoCA/cacert.pem /config/auth
cp demoCA/private/cakey.pem /config/auth
</pre></div>

<p>Generate the server certificate.</p>
<div class="codehilite"><pre><span></span>./CA.sh -newreq
</pre></div>

<p>exmaple:</p>
<p>Country Name: <code>US</code>
State Or Province Name: <code>New York</code>
Locality Name: <code>New York</code>
Organization Name: <code>Ubiquiti</code>
Organizational Unit Name: <code>Support</code>
Common Name: <code>server</code>
Email Address: <code>support@ubnt.com</code></p>
<p>Sign the server certificate.</p>
<div class="codehilite"><pre><span></span>./CA.sh -sign
</pre></div>

<p>Move and rename the server certificate + key to the /config/auth directory.</p>
<div class="codehilite"><pre><span></span>mv newcert.pem /config/auth/server.pem
mv newkey.pem /config/auth/server.key
</pre></div>

<p>Generate, sign and move the client1 certificates.</p>
<div class="codehilite"><pre><span></span>./CA.sh -newreq
</pre></div>

<p>Common Name: client1</p>
<div class="codehilite"><pre><span></span>./CA.sh -sign
mv newcert.pem /config/auth/client1.pem
mv newkey.pem /config/auth/client1.key
</pre></div>

<p>(Optional) Repeat the process for client2.</p>
<div class="codehilite"><pre><span></span>./CA.sh -newreq
</pre></div>

<p>Common Name: client2</p>
<div class="codehilite"><pre><span></span>./CA.sh -sign
mv newcert.pem /config/auth/client2.pem
mv newkey.pem /config/auth/client2.key
</pre></div>

<p>Verify the contents of the /config/auth directory.</p>
<div class="codehilite"><pre><span></span>ls -l /config/auth
</pre></div>

<p>You should have those files:</p>
<ul>
<li>cacert.pem</li>
<li>cakey.pem</li>
<li>client1.key</li>
<li>client1.pem</li>
<li>client2.key</li>
<li>client2.pem</li>
<li>dh.pem</li>
<li>server.key</li>
<li>server.pem</li>
</ul>
<p>Remove the password from the client + server keys. This allows the clients to connect using only the provided certificate.</p>
<div class="codehilite"><pre><span></span>openssl rsa -in /config/auth/server.key -out /config/auth/server-no-pass.key
openssl rsa -in /config/auth/client1.key -out /config/auth/client1-no-pass.key
openssl rsa -in /config/auth/client2.key -out /config/auth/client2-no-pass.key
</pre></div>

<p>Overwrite the existing keys with the no-pass versions.</p>
<div class="codehilite"><pre><span></span>mv /config/auth/server-no-pass.key /config/auth/server.key
mv /config/auth/client1-no-pass.key /config/auth/client1.key
mv /config/auth/client2-no-pass.key /config/auth/client2.key
</pre></div>

<p>Return to operational mode.</p>
<div class="codehilite"><pre><span></span><span class="nb">exit</span>
</pre></div>

<p>Enter configuration mode.</p>
<div class="codehilite"><pre><span></span>configure
</pre></div>

<p>If EdgeRouter's Interface is on port 433, you must change it.</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> service gui https-port <span class="m">8443</span>
commit <span class="p">;</span> save
</pre></div>

<p>Add a firewall rule for the OpenVPN traffic to the local firewall policy.</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">30</span> action accept
<span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">30</span> description OpenVPN
<span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">30</span> destination port <span class="m">443</span>
<span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">30</span> protocol tcp
</pre></div>

<p>Configure the OpenVPN virtual tunnel interface.</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> interfaces openvpn vtun0 mode server
<span class="nb">set</span> interfaces openvpn vtun0 server subnet <span class="m">172</span>.16.1.0/24
<span class="nb">set</span> interfaces openvpn vtun0 server push-route <span class="m">192</span>.168.1.0/24
<span class="nb">set</span> interfaces openvpn vtun0 server name-server <span class="m">192</span>.168.1.1
<span class="nb">set</span> interfaces openvpn vtun0 openvpn-option --duplicate-cn
<span class="nb">set</span> interfaces openvpn vtun0 local-port <span class="m">443</span>
edit interfaces openvpn vtun0
<span class="nb">set</span> openvpn-option <span class="s2">&quot;--push redirect-gateway&quot;</span>
<span class="nb">set</span> protocol tcp-passive
commit <span class="p">;</span> save
</pre></div>

<p>Link the server certificate/keys and DH key to the virtual tunnel interface.</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> interfaces openvpn vtun0 tls ca-cert-file /config/auth/cacert.pem
<span class="nb">set</span> interfaces openvpn vtun0 tls cert-file /config/auth/server.pem
<span class="nb">set</span> interfaces openvpn vtun0 tls key-file /config/auth/server.key
<span class="nb">set</span> interfaces openvpn vtun0 tls dh-file /config/auth/dh.pem
commit <span class="p">;</span> save
</pre></div>

<p>Add DNS forwarding to the new vlan vtun0 to get DNS resolving.</p>
<p><img alt="DNS" src="/assets/images/ubiquiti/guestWifi/14.DNS_F.png" /></p>
<h3 id="exmaple_for_clinetopvn_config">Exmaple for clinet.opvn Config<a class="headerlink" href="#exmaple_for_clinetopvn_config" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>client
dev tun
proto udp
remote &lt;server-ip or hostname&gt; <span class="m">443</span>
float
resolv-retry infinite
nobind
persist-key
persist-tun
verb <span class="m">3</span>
ca cacert.pem
cert client1.pem
key client1.key
</pre></div>

<h2 id="edgerouter_free_up_space_by_cleaning_old_firmware">EdgeRouter Free Up space by Cleaning Old Firmware<a class="headerlink" href="#edgerouter_free_up_space_by_cleaning_old_firmware" title="Permanent link">&para;</a></h2>
<p>ssh to the EdgeRouter:</p>
<div class="codehilite"><pre><span></span>delete system image
</pre></div>

<h2 id="speedtest_cli_on_edge_router">SpeedTest Cli on Edge Router<a class="headerlink" href="#speedtest_cli_on_edge_router" title="Permanent link">&para;</a></h2>
<p>ssh to the Edge Router.<br />
installation:</p>
<div class="codehilite"><pre><span></span>curl -Lo speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py
chmod +x speedtest-cli
</pre></div>

<p>run from the same directory:</p>
<div class="codehilite"><pre><span></span>./speedtest-cli --no-pre-allocate
</pre></div>

<p>based on <a href="https://github.com/sivel/speedtest-cli" title="speedtest-cli">https://github.com/sivel/speedtest-cli</a></p>
<h2 id="enable_netflow_on_edgerouter_to_unms">Enable NetFlow on EdgeRouter to UNMS<a class="headerlink" href="#enable_netflow_on_edgerouter_to_unms" title="Permanent link">&para;</a></h2>
<p>The most suitable place to enable NetFlow is your Default gateway router. UNMS supports NetFlow version 5 and 9. UNMS only record flow data for IP ranges defined below. Whenever UNMS receives any data from a router, the status of NetFlow changes to <code>Active</code>.</p>
<p>To show interfaces and pick the right interface:\</p>
<div class="codehilite"><pre><span></span>show interfaces
</pre></div>

<p>Example configuration for EdgeRouter:</p>
<div class="codehilite"><pre><span></span>configure
<span class="nb">set</span> system flow-accounting interface pppoe0
<span class="nb">set</span> system flow-accounting ingress-capture post-dnat
<span class="nb">set</span> system flow-accounting disable-memory-table
<span class="nb">set</span> system flow-accounting netflow server <span class="m">192</span>.168.1.10 port <span class="m">2055</span>
<span class="nb">set</span> system flow-accounting netflow version <span class="m">9</span>
<span class="nb">set</span> system flow-accounting netflow engine-id <span class="m">0</span>
<span class="nb">set</span> system flow-accounting netflow enable-egress engine-id <span class="m">1</span>
<span class="nb">set</span> system flow-accounting netflow timeout expiry-interval <span class="m">60</span>
<span class="nb">set</span> system flow-accounting netflow timeout flow-generic <span class="m">60</span>
<span class="nb">set</span> system flow-accounting netflow timeout icmp <span class="m">60</span>
<span class="nb">set</span> system flow-accounting netflow timeout max-active-life <span class="m">60</span>
<span class="nb">set</span> system flow-accounting netflow timeout tcp-fin <span class="m">10</span>
<span class="nb">set</span> system flow-accounting netflow timeout tcp-generic <span class="m">60</span>
<span class="nb">set</span> system flow-accounting netflow timeout tcp-rst <span class="m">10</span>
<span class="nb">set</span> system flow-accounting netflow timeout udp <span class="m">60</span>
commit
save
</pre></div>

<p>10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,100.64.0.0/10</p>
                
                  
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://3os.org/moreCategories/ubiquiti/";
      this.page.identifier =
        "moreCategories/ubiquiti/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//3os.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../synology/" title="Synology DSM" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Synology DSM
              </span>
            </div>
          </a>
        
        
          <a href="../android/" title="Android" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Android
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 3os.org @2018
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/fire1ce" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://linkedin.com/in/stas-kosatuhin" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://www.facebook.com/3os.org" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>